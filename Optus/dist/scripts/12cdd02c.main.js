window.Optus={Models:{},Collections:{},Views:{},init:function(){"use strict";this.currentlySelectedGraphIndex=0;var a=new Optus.Models.GraphModel({graphIndex:0}),b=new Optus.Models.GraphModel({graphIndex:1}),c=new Optus.Models.GraphModel({graphIndex:2}),d=new Optus.Collections.GraphsCollection([a,b,c]),e=new Optus.Views.GraphsCompView({collection:d});$("#graphsComponent").html(e.el)}},$(document).ready(function(){"use strict";Optus.init()}),this.JST=this.JST||{},this.JST["app/scripts/templates/graph.ejs"]=function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+="<div class='graphBar'>Graph_"+(null==(__t=graphIndex)?"":__t)+"<span>"+(null==(__t=graphWidthPC_end)?"":__t)+"%</span></div>\n\n";return __p},this.JST["app/scripts/templates/graphscomp.ejs"]=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+="<div class='row'>\n    <p>Bar graph resizer by Nicolas Tournier</p>\n    <hr>\n    <div id='barGraph' class='col-xs-12'></div>\n</div>\n<hr>\n<div class='row'>\n    <p>Select graph bar</p>\n    <div class='col-xs-6'>\n        <form id='selectGraph'>\n            <select form_id='selectGraph' id='graphBarSelector'></select>\n        </form>\n    </div>\n    <div class='col-xs-6'>\n        <form id='changeValue'>\n            <button form_id='changeValue' type='button' value='-25'>-25%</button>\n            <button form_id='changeValue' type='button' value='-10'>-10%</button>\n            <button form_id='changeValue' type='button' value='10'>+10%</button>\n            <button form_id='changeValue' type='button' value='25'>+25%</button>\n        </form>\n    </div>\n<div>";return __p},this.JST["app/scripts/templates/graphselect.ejs"]=function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<option value="'+(null==(__t=graphIndex)?"":__t)+'">Graph '+(null==(__t=graphIndex)?"":__t)+"</option>\n\n";return __p},Optus.Models=Optus.Models||{},function(){"use strict";Optus.Models.GraphModel=Backbone.Model.extend({defaults:{graphWidthPC_start:0,graphWidthPC_end:0}})}(),Optus.Collections=Optus.Collections||{},function(){"use strict";Optus.Collections.GraphsCollection=Backbone.Collection.extend({model:Optus.Models.GraphModel})}(),Optus.Views=Optus.Views||{},function(){"use strict";Optus.Views.GraphView=Backbone.View.extend({template:JST["app/scripts/templates/graph.ejs"],tagName:"div",className:"row graphBarContainer",initialize:function(){this.model.on("change:graphWidthPC_end",this.animateBar,this),this.render(),this.animateBar()},render:function(){this.$el.html(this.template(this.model.toJSON()))},setFinalWidth:function(){this.model.set({graphWidthPC_start:this.model.get("graphWidthPC_end")}),console.log("new start width "+this.model.get("graphWidthPC_start"))},animateBar:function(){var a=this;this.render();var b=this.model.get("graphWidthPC_start")+"%",c=this.model.get("graphWidthPC_end")+"%";this.$(".graphBar").css({width:b}),this.$(".graphBar").animate({width:c},{complete:function(){a.setFinalWidth()},progress:function(){var a=$(this).width()/$(this).parent().width();a>=1?$(this).addClass("graphBarTooBig"):$(this).removeClass("graphBarTooBig")}})}})}(),Optus.Views=Optus.Views||{},function(){"use strict";Optus.Views.GraphsCompView=Backbone.View.extend({template:JST["app/scripts/templates/graphscomp.ejs"],tagName:"div",className:"content",events:{change:"handleOptionSelect","click button":"handleButtonSelect"},handleOptionSelect:function(a){var b=parseInt(a.target.value);this.selectedModel=this.collection.at(b)},handleButtonSelect:function(a){var b=parseInt(a.currentTarget.value),c=parseInt(this.selectedModel.get("graphWidthPC_start")),d=c+b;0>d&&(d=0),this.selectedModel.set({graphWidthPC_end:d})},initialize:function(){this.selectedModel=this.collection.at(0),this.render()},render:function(){return this.$el.html(this.template()),this.collection.each(this.addGraphBar,this),this.collection.each(this.addGraphBarSelector,this),this},addGraphBar:function(a){var b=new Optus.Views.GraphView({model:a});this.$("#barGraph").append(b.el)},addGraphBarSelector:function(a){var b=new Optus.Views.GraphBarSelectorOptionView({model:a});this.$("#graphBarSelector").append(b.el.innerHTML)}})}(),Optus.Views=Optus.Views||{},function(){"use strict";Optus.Views.GraphBarSelectorOptionView=Backbone.View.extend({template:JST["app/scripts/templates/graphselect.ejs"],initialize:function(){this.render()},render:function(){this.$el.html(this.template(this.model.toJSON()))}})}();